<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.BorderPane?>
<!-- Import các layout mới -->
<?import javafx.scene.layout.TilePane?>
<?import javafx.scene.control.ScrollPane?>

<!--
  File FXML cho màn hình chính, sau khi đăng nhập.
  ĐÃ CẬP NHẬT:
  - Thêm menu (VBox) vào <left>.
  - Di chuyển welcomeLabel lên header.
  - Thêm <center> (StackPane) để chứa các view (đặt sân, lịch sử...).
-->
<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="bookingapp.controller.MainWindowController"
           styleClass="main-background"
           stylesheets="@../assets/style.css">

    <BorderPane>
        <!-- Thanh "header" trên cùng -->
        <top>
            <HBox alignment="CENTER_LEFT" styleClass="header-pane">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>

                <Text text="TRANG QUẢN LÝ" styleClass="logo-text" />
                <Region HBox.hgrow="ALWAYS" /> <!-- Đẩy nội dung sang phải -->

                <!-- SỬA LỖI: Di chuyển welcomeLabel từ center lên đây -->
                <Label fx:id="welcomeLabel" styleClass="header-welcome-text" />
                <Region HBox.hgrow="SOMETIMES" /> <!-- Thêm khoảng cách -->

                <Button fx:id="logoutButton" text="Đăng xuất" onAction="#handleLogout" styleClass="secondary-button" />
            </HBox>
        </top>

        <!-- MỚI: Menu điều hướng bên trái -->
        <left>
            <VBox styleClass="menu-pane" spacing="10" alignment="TOP_CENTER">
                <padding>
                    <Insets top="20" left="15" right="15" bottom="20"/>
                </padding>
                <Label styleClass="menu-title" text="Menu"/>

                <Button fx:id="bookingViewButton" text="Đặt Sân" styleClass="menu-button" onAction="#handleShowBookingView"/>
                <Button fx:id="historyViewButton" text="Lịch sử Đặt Sân" styleClass="menu-button" onAction="#handleShowHistoryView"/>
                <Button fx:id="accountViewButton" text="Tài khoản" styleClass="menu-button" onAction="#handleShowAccountView"/>
            </VBox>
        </left>

        <!-- MỚI: Nội dung chính ở giữa -->
        <center>
            <!-- StackPane để xếp chồng các view (Đặt sân, Lịch sử...) lên nhau -->
            <StackPane fx:id="mainContentPane" style="-fx-background-color: transparent;">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <!-- VIEW 1: Đặt Sân (Hiển thị 4 sân) -->
                <VBox fx:id="bookingView" alignment="TOP_CENTER" spacing="20" visible="true">
                    <Label text="Chọn Sân Cầu Lông" styleClass="page-title"/>

                    <!-- TilePane để tạo lưới 2x2 -->
                    <TilePane hgap="25" vgap="25" alignment="CENTER" prefColumns="2" prefRows="2">

                        <!-- Sân 1 -->
                        <VBox styleClass="court-card" alignment="CENTER_LEFT" spacing="10">
                            <Label text="Sân 1" styleClass="court-title"/>
                            <Label text="Trạng thái: Trống" styleClass="court-status-available"/>
                            <Button text="Chọn Sân 1" styleClass="button"/>
                        </VBox>

                        <!-- Sân 2 -->
                        <VBox styleClass="court-card" alignment="CENTER_LEFT" spacing="10">
                            <Label text="Sân 2" styleClass="court-title"/>
                            <Label text="Trạng thái: Đang bảo trì" styleClass="court-status-maintenance"/>
                            <Button text="Chọn Sân 2" styleClass="button" disable="true"/>
                        </VBox>

                        <!-- Sân 3 -->
                        <VBox styleClass="court-card" alignment="CENTER_LEFT" spacing="10">
                            <Label text="Sân 3" styleClass="court-title"/>
                            <Label text="Trạng thái: Trống" styleClass="court-status-available"/>
                            <Button text="Chọn Sân 3" styleClass="button"/>
                        </VBox>

                        <!-- Sân 4 -->
                        <VBox styleClass="court-card" alignment="CENTER_LEFT" spacing="10">
                            <Label text="Sân 4" styleClass="court-title"/>
                            <Label text="Trạng thái: Đã đặt (18:00 - 19:00)" styleClass="court-status-booked"/>
                            <Button text="Chọn Sân 4" styleClass="button"/>
                        </VBox>

                    </TilePane>
                </VBox>

                <!-- VIEW 2: Lịch sử (Placeholder) -->
                <VBox fx:id="historyView" alignment="CENTER" spacing="20" visible="false">
                    <Label text="Lịch sử Đặt Sân" styleClass="page-title"/>
                    <Label text="Tính năng này đang được phát triển..." />
                </VBox>

                <!-- VIEW 3: Tài khoản (Placeholder) -->
                <VBox fx:id="accountView" alignment="CENTER" spacing="20" visible="false">
                    <Label text="Quản lý Tài khoản" styleClass="page-title"/>
                    <Label text="Tính năng này đang được phát triển..." />
                </VBox>

            </StackPane>
        </center>

    </BorderPane>

</StackPane>

